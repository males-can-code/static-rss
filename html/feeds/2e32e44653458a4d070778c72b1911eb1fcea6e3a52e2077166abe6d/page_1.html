<HTML>
<HEAD>
<TITLE>StaticRSS|Linuxers</TITLE>
<link rel="shortcut icon" href="/home/eco/bin/apps/static-rss/favicon.ico">
<link rel="stylesheet" type="text/css" href="/home/eco/bin/apps/static-rss/css/stylesheet.css" />
<script type="text/javascript"> document.write("<meta http-equiv='refresh' content='60' >"); </script>
</HEAD>
<BODY>
<DIV id="main_wrapper">
<DIV id="feed_sidebar">
<UL>
<DIV id="group_title">
linux
</DIV>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/595e978e6aca9bf5e2a8d9f6ba7d75e2a148cee6525e8f815026df21/page_1.html" class="read">Unixmen</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/05b09c4bb40f4ee87e8f542f9b361ddebd9f8c2393f1f8dbe016b54d/page_1.html" class="read">The Powerbase</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/01d6d81bcc09bf0c444cb99818e668319d58dbb84791398b99732e1b/page_1.html" class="read">The H - Grand unified feed</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/923ea7b0c8529e61ea84734ac2b4a5c3515ccb3c13beff414c7c6368/page_1.html" class="read">LXer Linux News</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_1.html" class="read">Linuxers</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/3bc25ff0dd151ef78c789f29ee67a01b5e090c330b1fac16fab62126/page_1.html" class="read">Phoronix</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/b283fb53de6a6e4a2b8bd6c93dccd0ac859890eda12a06bb58553ea0/page_1.html" class="read">Webwereld</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/659d1087bf70836f26ed445de7cfdc607560d867c88ec6ab8f07800b/page_1.html" class="read">Tweakers Mixed RSS Feed</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2996a2b4b5e11d7fe0fec10a640920a2edb45b749c7b2228798f1de8/page_1.html" class="read">tuxmachines.org</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/67a268dfd571ba166dbe78bf1005536949f44fa46118c2eedac42dee/page_1.html" class="read">OStatic blogs</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/eab0c4ba401b8fbb22c0f9e890efa3291c33c638a6a198cac821458f/page_1.html" class="read">OMG! Ubuntu!</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/928575882c52fb7313cab871c61a974a59023f75e474d12373a68b51/page_1.html" class="read">Librenix.com | Linux Sysadmin Central</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/7d2efe20a061111e51d4c0bdf09a6c38294b9197039b9fdf2eb6b682/page_1.html" class="read">Inconsolation</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/272c6e9cf1b4ce5729f3697c19311b5c0d9a5e11c3188509a43e8707/page_1.html" class="read">OSNews</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/827d5aaa07ab318d316d3f7aceaf034d76486ffb5d0daf301678b301/page_1.html" class="read">Web Upd8 - Ubuntu / Linux blog</A>
</LI>

<DIV id="group_title">
space
</DIV>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/f5a30713e94693c4860221fc2370e5073b0a16dfc32def356746ca9c/page_1.html" class="read">Kepler News and Features</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/3da411ee258e9e791e3b264bc7503e3d586277b303cb4d860bfa7fde/page_1.html" class="read">Universe News</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/f1d533b115441cdfa6106ec15732199c91ba92a604a35e68f1389df3/page_1.html" class="read">NASA Breaking News</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/400de33c457a288a79e419e35fc780af78f4ccf788a75c1c86fe9cd8/page_1.html" class="read">SOFIA News and Features</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/375b4d4c8d07d4e59830f9921d509dd45a20b0cbfad68ac392d07af1/page_1.html" class="read">Solar System Exploration News</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/82e543e8cabace163f7fcefc45503a9a1cb420ebcaae3860d1909f67/page_1.html" class="read">ESA Top News</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/76009118a8106301881d98958dba12d3245775046c58df183cdc6673/page_1.html" class="read">ISS Status Reports</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/848fce29bf61af2aa9481f3657100956ec076ea8f17a3f8975b83c56/page_1.html" class="read">NASA Image of the Day (Large)</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/656ebc6929bd0b8ba1e7e6a4c800c9e56dd1b917ad8dea9144d66f1c/page_1.html" class="read">Chandra X-ray Observatory Images</A>
</LI>

<DIV id="group_title">
threads
</DIV>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/57331d9dd1f1eabe65a16fd9e392b86d75b1eceedaeefa037d3ab15c/page_1.html" class="read">Arch Linux Forums / January 2013 Screenshots</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/ebc04f43406351be5756afd26b9fce035a8ae6332952788d1675327e/page_1.html" class="read">Arch Linux Forums / DWM Hackers Unite! Share (or request) dwm patches.</A>
</LI>

<DIV id="group_title">
news
</DIV>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/3a53cf8ff40c5e11151383892c5d80a03668c7c3856d75410693ea2c/page_1.html" class="read">Lifehacker</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/8213cafa3148950fb0506ab27db477152de90799b2a999f08475c3fd/page_1.html" class="read">nu.nl - Algemeen</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/739171bc001265ad1c2234bc4faae84e6d99c74307af18b3a7d75558/page_1.html" class="read">nrc.nl :: /</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/a9dccfa6342d67bb064f1a2946ee3d9e90b86cbb65762ca1e11d76c1/page_1.html" class="read">Haarlems Dagblad - Alle Artikelen</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/e618e80cfa817632ce6b01d0534809f835199435b9d0c0ac358802f2/page_1.html" class="read">NOS Nieuws</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/f87740a2281a40a4fb1740bec1d564063d917af55b1976e1e71b0ba3/page_1.html" class="read">Haarlems Dagblad - Alle Artikelen</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/61c07c550600104b2b5eb7e05e565a4b3aeee22299f253f466cb6aa2/page_1.html" class="read">BBC News - Home</A>
</LI>

<DIV id="group_title">
projects
</DIV>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/8b0cbecc03c8b5b1ea87667019c25df5b506ca83d78754729b84883e/page_1.html" class="read">Latest news</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/677123416419b60914ce727b4a9193f8c692b617d073c011095ea204/page_1.html" class="read">CyanogenMod</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/ed7be1a8fb70ceb1c15b6d8e169448c19fd4f71bc5e784a244ab5fa7/page_1.html" class="read">Tizen - An open source, standards-based software platform for multiple device categories.</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/8652975e9524dd666a8824c9b18aa2fe9137472f227ab7eea8f260d9/page_1.html" class="read">Haiku Project</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/e51b9ebcbebb36f3ea6f15615c4664cfddf90f6eb2d601ae9248b6b7/page_1.html" class="read">The MagPi</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/59b7394763caa72ed2601dbcfd3f12ced4ae69504836ee6fbb481de9/page_1.html" class="read">Raspberry Pi</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/ab17665619674367ecee0a3d7ff5134f41155199ce8a128d10744ced/page_1.html" class="read">Journal</A>
</LI>

<DIV id="group_title">
podcasts
</DIV>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/e3edd57633991481d73ba8e55675c5dd1996405e872cd749603f4e13/page_1.html" class="read">Linux Outlaws</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/8e8602b6e4caebae972d01255276dea087fd7e6be74ae28942135fe9/page_1.html" class="read">Ogg ChannelQuicksurf Internet Studios</A>
</LI>


</UL>
</DIV>
<DIV id="entry_sidebar">
<UL>
<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_1.html#8c15fa9ba3bc40a3ecc6cc54dea5fdcd71bb6772e19dd4e0de798266" class="read">Correct your habit of incorrectly typing "ls" using the program "sl"</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_1.html#43f5ed88040e7f6c41a421c0b75342a00638b5f0f5bdd1adae176b5e" class="read">Drupal 7: Convert user login block to use ajax</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_2.html#589709ac0dc9eeb910668e0b0948db79033b1328fad7e5a093073251" class="read">Use free with '-s' option to get a continuous update of memory usage info</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_2.html#46c1f370c438d80eed96d69557ebd555b671c792b1d038b73362f09f" class="read">About:me Firefox addon - View a visual pattern of your Internet activities</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_2.html#8f827af52d6088b251d6647b1d85ff93c3d80d7d3a707588ec50f42e" class="read">How to: Get the information of your Computer's Hardware components using Dmidecode command</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_2.html#3a7ec6d2c7ee8ce9d08058d0042bb25459819b9125eb248991628364" class="read">How to precisely find the amount of memory or RAM being used by Firefox</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_3.html#1c4bb4707cba630ddd17f6f1bfd9e5e6b2259a43c338276cfe4acdb3" class="read">The history of the origin of grep command</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_3.html#f44394a5b816b22c821f827737ca503bf2cb2e80cd23f23c657f3263" class="read">How to remove or uninstall Nouveau drivers from Ubuntu</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_3.html#b8da08989686958e8ce82ee2e5da8b15fe11521d0e00d70db4713c85" class="read">SuperTuxKart 0.7.1 hits Release Candiadate</A>
</LI>

<LI>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_3.html#98b1e169bc6db0be04a56f41e6b98f6b1d57a8679d560d9b6465fe98" class="read">Drupal 7: How to remove throbber image from ajax links and create a custom throbber.</A>
</LI>


</UL>
</DIV>
<DIV id="feed_wrapper">
<DIV id="feed_title">
Linuxers
</DIV>
<DIV id="page_links">
<A HREF=/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_1.html><</A>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_1.html">1</A>

<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_2.html">2</A>

<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_3.html">3</A>


<A HREF=/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_2.html>></A>
</DIV>
<DIV id="feed_content_wrapper">
<DIV id="entry_box">
<A name="8c15fa9ba3bc40a3ecc6cc54dea5fdcd71bb6772e19dd4e0de798266"></A>

<DIV id="entry_header_wrapper">

<DIV id="entry_title">
<A HREF=http://feedproxy.google.com/~r/Linuxers/~3/JlbPSSbemdw/correct-your-habit-incorrectly-typing-ls-using-program-sl class="read">Correct your habit of incorrectly typing "ls" using the program "sl"</A>
</DIV>

</DIV>

<DIV id="entry_date_published">
Mon, 04 Apr 2011 17:55:44 +0000
</DIV>

<DIV id="entry_content">
<!-- google_ad_section_start --><p>Almost everyone of us would have made the mistake of incorrectly typing &ldquo;sl&rdquo; or &ldquo;LS&rdquo; instead of a simple &ldquo;ls&rdquo;. Seriously! how difficult could it be to type those two letters? But we keep making the same mistake over and over. In order to correct this problem, there is a wonderful program name &ldquo;sl&rdquo;. It shows a small animation of a steam locomotive(abbr. sl) every time we type &ldquo;sl&rdquo; or &ldquo;LS&rdquo;. It may sound funny as of now, but trust me, its really annoying when you are doing some serious work and suddenly a locomotive comes out of nowhere, running across the terminal.</p>
<p>The&nbsp; annoying part is that it doesn't respond to Ctrl-C and there is nothing one can do in such a short time other than viewing it get past. Now that I'm thinking, it'd be fun to pull a <a href="http://linuxers.org/pranks">prank</a> on someone who isn't aware of sl.</p>
<p>Here is how you install the package.</p>
<blockquote>
<p><span class="root">[shredder12]$</span> sudo apt-get install sl</p>
</blockquote>
<p>Well, its annoying nature does makes it work. Sooner or later you stop making the mistakes. Here are two different versions of the locomotive.</p>
<blockquote>
<p><span class="root">[shredder12]$</span> sl -a</p>
</blockquote>
<p class="rtecenter"><a href="http://linuxers.org/sites/default/files/content/misc/sl-a2-cut.png" rel="lightbox"><img alt="" src="http://linuxers.org/sites/default/files/content/misc/sl-a2-cut.png" style="width: 653px; height: 330px;" /></a></p>
<blockquote>
<p><span class="root">[shredder12]$</span> sl -l</p>
</blockquote>
<p class="rtecenter"><a href="http://linuxers.org/sites/default/files/content/misc/sl-l-cut.png" rel="lightbox"><img alt="" src="http://linuxers.org/sites/default/files/content/misc/sl-l-cut.png" style="width: 655px; height: 259px;" /></a></p><!-- google_ad_section_end --><img height="1" src="http://feeds.feedburner.com/~r/Linuxers/~4/JlbPSSbemdw" width="1" />
</DIV>

</DIV>


<DIV id="entry_box">
<A name="43f5ed88040e7f6c41a421c0b75342a00638b5f0f5bdd1adae176b5e"></A>

<DIV id="entry_header_wrapper">

<DIV id="entry_title">
<A HREF=http://feedproxy.google.com/~r/Linuxers/~3/fBUBJCaPIEE/drupal-7-convert-user-login-block-ajax class="read">Drupal 7: Convert user login block to use ajax</A>
</DIV>

</DIV>

<DIV id="entry_date_published">
Sun, 04 Sep 2011 08:37:01 +0000
</DIV>

<DIV id="entry_content">
<!-- google_ad_section_start --><p>In this simple how to we will see how we can easily convert drupal 7 user login block to use ajax. This is one of the many methods of using ajax for login block. We will see few cool  d7 tricks that makes this very easy.
</p>
<!--break--><!--break--><p>username: test<br />
password: test</p>
<p><strong>UPDATE: I am now maintaining <a href="http://drupal.org/project/ajax_register" rel="nofollow">ajaxlogin/register module</a> to use it in your own project download and enable the module and add the AjaxLogin block to your site.</strong></p>
<p>Lets get started by defining hook_menu(). We have defined a menu similar to user/password. But this new menu entry will degrade gracefully and we defined 2 other menu items to listen to ajax calls.<br />
<div class="codeblock"><code><span style="color: #000000;"><span style="color: #0000BB;">&lt;?php<br /></span><span style="color: #FF8000;">/**<br /> * Implementation of hook_menu()<br /> */<br /></span><span style="color: #007700;">function </span><span style="color: #0000BB;">ajaxlogin_menu</span><span style="color: #007700;">() {<br />&nbsp; </span><span style="color: #0000BB;">$items </span><span style="color: #007700;">= array();<br />&nbsp; <br />&nbsp; </span><span style="color: #FF8000;">// Fetch custom user password form via ajax and will have graceful degradation<br />&nbsp; </span><span style="color: #0000BB;">$items</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'ajaxlogin/password'</span><span style="color: #007700;">] = array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'title' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'Request new password'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'page callback' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin_password_form'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'access callback' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">TRUE</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'type' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">MENU_CALLBACK</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'file' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin.pages.inc'</span><span style="color: #007700;">,<br />&nbsp; );&nbsp; <br />&nbsp; <br />&nbsp; </span><span style="color: #FF8000;">// Process login via ajax <br />&nbsp; </span><span style="color: #0000BB;">$items</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'ajaxlogin/user_login'</span><span style="color: #007700;">] = array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'title' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'Ajax user login'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'page callback' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin_login_ajax_callback'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'access callback' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'user_is_anonymous'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'type' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">MENU_CALLBACK</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'file' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin.pages.inc'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'delivery callback' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin_ajax_deliver_callback'</span><span style="color: #007700;">,<br />&nbsp; );&nbsp; <br />&nbsp; <br />&nbsp; </span><span style="color: #FF8000;">// Process user password form via ajax<br />&nbsp; </span><span style="color: #0000BB;">$items</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'ajaxlogin/request_password'</span><span style="color: #007700;">] = array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'title' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'Request password Ajax'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'page callback' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin_request_password_ajax_callback'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'access callback' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">TRUE</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'type' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">MENU_CALLBACK</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'file' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin.pages.inc'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'delivery callback' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin_ajax_deliver_callback'</span><span style="color: #007700;">,<br />&nbsp; );&nbsp; <br />&nbsp; <br />&nbsp; return </span><span style="color: #0000BB;">$items</span><span style="color: #007700;">;<br />}<br /></span><span style="color: #0000BB;">?&gt;</span></span></code></div></p>
<p>This is not required but if you want to replace all links to user/password to your new custom menu entry use this hook. In my case i used hook_menu_alter() and removed the user/password menu item, so i needed this hook to fix broken paths.<br />
<div class="codeblock"><code><span style="color: #000000;"><span style="color: #0000BB;">&lt;?php<br /></span><span style="color: #FF8000;">/**<br /> * Implementation of hook_url_outbound_alter<br /> */<br /></span><span style="color: #007700;">function </span><span style="color: #0000BB;">ajaxlogin_url_outbound_alter</span><span style="color: #007700;">(&amp;</span><span style="color: #0000BB;">$path</span><span style="color: #007700;">, &amp;</span><span style="color: #0000BB;">$options</span><span style="color: #007700;">, </span><span style="color: #0000BB;">$original_path</span><span style="color: #007700;">) {<br />&nbsp; if (</span><span style="color: #0000BB;">$path </span><span style="color: #007700;">== </span><span style="color: #DD0000;">'user/password'</span><span style="color: #007700;">) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$path </span><span style="color: #007700;">= </span><span style="color: #DD0000;">'ajaxlogin/password/nojs'</span><span style="color: #007700;">;<br />&nbsp; }<br />}<br /></span><span style="color: #0000BB;">?&gt;</span></span></code></div></p>
<p>We are defining a custom delivery callback, since we don't want to add any additional js/css along with ajax response. If you care about the page state, use 'ajax_deliver' as 'delivery callback'.</p>
<p><div class="codeblock"><code><span style="color: #000000;"><span style="color: #0000BB;">&lt;?php<br /></span><span style="color: #FF8000;">/**<br /> * Custom delvery callback<br /> */<br /></span><span style="color: #007700;">function </span><span style="color: #0000BB;">ajaxlogin_ajax_deliver_callback</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$page_callback_result</span><span style="color: #007700;">) {<br />&nbsp; print </span><span style="color: #0000BB;">$page_callback_result</span><span style="color: #007700;">;<br />&nbsp; </span><span style="color: #0000BB;">ajax_footer</span><span style="color: #007700;">();<br />}<br /></span><span style="color: #0000BB;">?&gt;</span></span></code></div></p>
<p>We are defining custom block implementation. Its sometimes better to add it to page template directly. In that case i suggest you to use <strong>hook_page_alter</strong> or <strong>hook_page_build</strong> to add the variables to page template directly.</p>
<p><div class="codeblock"><code><span style="color: #000000;"><span style="color: #0000BB;">&lt;?php<br /></span><span style="color: #FF8000;">/**<br /> * Implementation of hook_block_info()<br /> */<br /></span><span style="color: #007700;">function </span><span style="color: #0000BB;">ajaxlogin_block_info</span><span style="color: #007700;">() {<br />&nbsp; </span><span style="color: #0000BB;">$blocks</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'ajaxlogin'</span><span style="color: #007700;">] = array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'info' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'Ajaxlogin Block'</span><span style="color: #007700;">,<br />&nbsp; );<br />&nbsp; return </span><span style="color: #0000BB;">$blocks</span><span style="color: #007700;">;<br />}<br /><br />function </span><span style="color: #0000BB;">ajaxlogin_block_view</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$delta </span><span style="color: #007700;">= </span><span style="color: #0000BB;">0</span><span style="color: #007700;">) {<br />&nbsp; </span><span style="color: #0000BB;">$block </span><span style="color: #007700;">= array();<br />&nbsp; global </span><span style="color: #0000BB;">$user</span><span style="color: #007700;">;<br />&nbsp; if (!</span><span style="color: #0000BB;">$user</span><span style="color: #007700;">-&gt;</span><span style="color: #0000BB;">uid </span><span style="color: #007700;">&amp;&amp; !(</span><span style="color: #0000BB;">arg</span><span style="color: #007700;">(</span><span style="color: #0000BB;">0</span><span style="color: #007700;">) == </span><span style="color: #DD0000;">'user' </span><span style="color: #007700;">&amp;&amp; !</span><span style="color: #0000BB;">is_numeric</span><span style="color: #007700;">(</span><span style="color: #0000BB;">arg</span><span style="color: #007700;">(</span><span style="color: #0000BB;">1</span><span style="color: #007700;">)))) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$block</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'subject'</span><span style="color: #007700;">] = (</span><span style="color: #DD0000;">'User login'</span><span style="color: #007700;">);<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$block</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'content'</span><span style="color: #007700;">] = </span><span style="color: #0000BB;">drupal_get_form</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'ajaxlogin_login_block_form'</span><span style="color: #007700;">);<br />&nbsp; }<br />&nbsp; return </span><span style="color: #0000BB;">$block</span><span style="color: #007700;">;<br />}<br /></span><span style="color: #0000BB;">?&gt;</span></span></code></div></p>
<p>This is similar to user login block we are creating a custom user login form. Yes, we can use user_login_block form and use hook_form_alter. But for the sake of simplicity i have created a similar form.<br />
<div class="codeblock"><code><span style="color: #000000;"><span style="color: #0000BB;">&lt;?php<br /></span><span style="color: #FF8000;">/**<br /> * Custom login form<br /> */<br /></span><span style="color: #007700;">function </span><span style="color: #0000BB;">ajaxlogin_login_block_form</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$form</span><span style="color: #007700;">, &amp;</span><span style="color: #0000BB;">$form_state</span><span style="color: #007700;">) {<br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'errors'</span><span style="color: #007700;">] = array(</span><span style="color: #DD0000;">'#markup' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'&lt;div id="ajaxlogin-error"&gt;&lt;/div&gt;'</span><span style="color: #007700;">);<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#attached'</span><span style="color: #007700;">] = array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'js' </span><span style="color: #007700;">=&gt; array(</span><span style="color: #0000BB;">drupal_get_path</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'module'</span><span style="color: #007700;">, </span><span style="color: #DD0000;">'ajaxlogin'</span><span style="color: #007700;">) . </span><span style="color: #DD0000;">'/js/ajaxlogin.js'</span><span style="color: #007700;">),<br />&nbsp; );<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#action'</span><span style="color: #007700;">] = </span><span style="color: #0000BB;">url</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$_GET</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'q'</span><span style="color: #007700;">], array(</span><span style="color: #DD0000;">'query' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">drupal_get_destination</span><span style="color: #007700;">()));<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#id'</span><span style="color: #007700;">] = </span><span style="color: #DD0000;">'ajaxlogin-login-form'</span><span style="color: #007700;">;<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#validate'</span><span style="color: #007700;">] = </span><span style="color: #0000BB;">user_login_default_validators</span><span style="color: #007700;">();<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#submit'</span><span style="color: #007700;">][] = </span><span style="color: #DD0000;">'user_login_submit'</span><span style="color: #007700;">;<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'name'</span><span style="color: #007700;">] = array(</span><span style="color: #DD0000;">'#type' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'textfield'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#title' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">t</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'Username'</span><span style="color: #007700;">),<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#maxlength' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">USERNAME_MAX_LENGTH</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#size' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">15</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#required' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">TRUE</span><span style="color: #007700;">,<br />&nbsp; );<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'pass'</span><span style="color: #007700;">] = array(</span><span style="color: #DD0000;">'#type' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'password'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#title' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">t</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'Password'</span><span style="color: #007700;">),<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#maxlength' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">60</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#size' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">15</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#required' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">TRUE</span><span style="color: #007700;">,<br />&nbsp; );<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'actions'</span><span style="color: #007700;">] = array(</span><span style="color: #DD0000;">'#type' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'actions'</span><span style="color: #007700;">);<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'actions'</span><span style="color: #007700;">][</span><span style="color: #DD0000;">'submit'</span><span style="color: #007700;">] = array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#type' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'submit'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#value' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">t</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'Log in'</span><span style="color: #007700;">),<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#ajax' </span><span style="color: #007700;">=&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'path' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin/user_login'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; ),<br />&nbsp; );<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'request_password'</span><span style="color: #007700;">] = array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#type' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'link'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#title' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">t</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'Request new password'</span><span style="color: #007700;">),<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#href' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin/password/nojs/'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#id' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajax_link'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#attributes' </span><span style="color: #007700;">=&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'class' </span><span style="color: #007700;">=&gt; array(</span><span style="color: #DD0000;">'use-ajax'</span><span style="color: #007700;">),<br />&nbsp;&nbsp;&nbsp; ),<br />&nbsp; );<br /><br />&nbsp; return </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">;<br />}<br /></span><span style="color: #0000BB;">?&gt;</span></span></code></div></p>
<p>We will create another file ajaxlogin.pages.inc here and add the code below to that file.</p>
<p><div class="codeblock"><code><span style="color: #000000;"><span style="color: #0000BB;">&lt;?php<br /></span><span style="color: #FF8000;">/**<br /> * Load Request password using ajax <br /> */<br /></span><span style="color: #007700;">function </span><span style="color: #0000BB;">ajaxlogin_password_form</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$type </span><span style="color: #007700;">= </span><span style="color: #DD0000;">'ajax'</span><span style="color: #007700;">) {<br /><br />&nbsp; </span><span style="color: #0000BB;">$form </span><span style="color: #007700;">= </span><span style="color: #0000BB;">drupal_get_form</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'ajaxlogin_user_pass'</span><span style="color: #007700;">);<br />&nbsp; </span><span style="color: #0000BB;">$output </span><span style="color: #007700;">= </span><span style="color: #0000BB;">render</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$form</span><span style="color: #007700;">);<br /><br />&nbsp; if (</span><span style="color: #0000BB;">$type </span><span style="color: #007700;">== </span><span style="color: #DD0000;">'ajax'</span><span style="color: #007700;">) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$commands </span><span style="color: #007700;">= array();<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #FF8000;">// Replace the login form with request for password form<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$commands</span><span style="color: #007700;">[] = </span><span style="color: #0000BB;">ajax_command_replace</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'#ajaxlogin-login-form'</span><span style="color: #007700;">, </span><span style="color: #0000BB;">$output</span><span style="color: #007700;">);<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$page </span><span style="color: #007700;">= array(</span><span style="color: #DD0000;">'#type' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajax'</span><span style="color: #007700;">, </span><span style="color: #DD0000;">'#commands' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">$commands</span><span style="color: #007700;">);<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$commands </span><span style="color: #007700;">= </span><span style="color: #0000BB;">ajax_prepare_response</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$page</span><span style="color: #007700;">);<br />&nbsp;&nbsp;&nbsp; print </span><span style="color: #0000BB;">ajax_render</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$commands</span><span style="color: #007700;">);<br />&nbsp; }<br />&nbsp; else {<br />&nbsp;&nbsp;&nbsp; return </span><span style="color: #0000BB;">$output</span><span style="color: #007700;">;<br />&nbsp; }<br />}<br /><br /></span><span style="color: #FF8000;">/**<br /> * Request user password form<br /> */<br /></span><span style="color: #007700;">function </span><span style="color: #0000BB;">ajaxlogin_user_pass</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$form</span><span style="color: #007700;">, &amp;</span><span style="color: #0000BB;">$form_state</span><span style="color: #007700;">) {<br />&nbsp; </span><span style="color: #0000BB;">module_load_include</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'pages.inc'</span><span style="color: #007700;">, </span><span style="color: #DD0000;">'user'</span><span style="color: #007700;">);<br />&nbsp; global </span><span style="color: #0000BB;">$user</span><span style="color: #007700;">;<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#id'</span><span style="color: #007700;">] = </span><span style="color: #DD0000;">'ajaxlogin-user-pass'</span><span style="color: #007700;">;<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#attributes'</span><span style="color: #007700;">][</span><span style="color: #DD0000;">'class'</span><span style="color: #007700;">] = array(</span><span style="color: #DD0000;">'ajaxlogin-user-form'</span><span style="color: #007700;">);<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'errors'</span><span style="color: #007700;">] = array(</span><span style="color: #DD0000;">'#markup' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'&lt;div id="ajaxlogin-error"&gt;&lt;/div&gt;'</span><span style="color: #007700;">);<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'name'</span><span style="color: #007700;">] = array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#type' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'textfield'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#title' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">t</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'Username or e-mail address'</span><span style="color: #007700;">),<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#size' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">60</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#maxlength' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">max</span><span style="color: #007700;">(</span><span style="color: #0000BB;">USERNAME_MAX_LENGTH</span><span style="color: #007700;">, </span><span style="color: #0000BB;">EMAIL_MAX_LENGTH</span><span style="color: #007700;">),<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#required' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">TRUE</span><span style="color: #007700;">,<br />&nbsp; );<br /><br />&nbsp; </span><span style="color: #FF8000;">// Allow logged in users to request this also.<br />&nbsp; </span><span style="color: #007700;">if (</span><span style="color: #0000BB;">$user</span><span style="color: #007700;">-&gt;</span><span style="color: #0000BB;">uid </span><span style="color: #007700;">&gt; </span><span style="color: #0000BB;">0</span><span style="color: #007700;">) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'name'</span><span style="color: #007700;">][</span><span style="color: #DD0000;">'#type'</span><span style="color: #007700;">] = </span><span style="color: #DD0000;">'value'</span><span style="color: #007700;">;<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'name'</span><span style="color: #007700;">][</span><span style="color: #DD0000;">'#value'</span><span style="color: #007700;">] = </span><span style="color: #0000BB;">$user</span><span style="color: #007700;">-&gt;</span><span style="color: #0000BB;">mail</span><span style="color: #007700;">;<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'mail'</span><span style="color: #007700;">] = array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#prefix' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'&lt;p&gt;'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#markup' </span><span style="color: #007700;">=&gt;&nbsp; </span><span style="color: #0000BB;">t</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'Password reset instructions will be mailed to %email. You must log out to use the password reset link in the e-mail.'</span><span style="color: #007700;">, array(</span><span style="color: #DD0000;">'%email' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">$user</span><span style="color: #007700;">-&gt;</span><span style="color: #0000BB;">mail</span><span style="color: #007700;">)),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#suffix' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'&lt;/p&gt;'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; );<br />&nbsp; }<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#validate'</span><span style="color: #007700;">][] = </span><span style="color: #DD0000;">'user_pass_validate'</span><span style="color: #007700;">;<br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#submit'</span><span style="color: #007700;">][] = </span><span style="color: #DD0000;">'user_pass_submit'</span><span style="color: #007700;">;<br /><br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'actions'</span><span style="color: #007700;">] = array(</span><span style="color: #DD0000;">'#type' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'actions'</span><span style="color: #007700;">);<br />&nbsp; </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'actions'</span><span style="color: #007700;">][</span><span style="color: #DD0000;">'submit'</span><span style="color: #007700;">] = array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#type' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'submit'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#value' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">t</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'E-mail new password'</span><span style="color: #007700;">),<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'#ajax' </span><span style="color: #007700;">=&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000;">'path' </span><span style="color: #007700;">=&gt; </span><span style="color: #DD0000;">'ajaxlogin/request_password'</span><span style="color: #007700;">,<br />&nbsp;&nbsp;&nbsp; ),<br />&nbsp; );<br /><br />&nbsp; return </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">;<br />}<br /><br /></span><span style="color: #FF8000;">/**<br /> * Process user login form using ajax<br /> */<br /></span><span style="color: #007700;">function </span><span style="color: #0000BB;">ajaxlogin_login_ajax_callback</span><span style="color: #007700;">() {<br />&nbsp; </span><span style="color: #FF8000;">// Get the form details<br />&nbsp; </span><span style="color: #007700;">list(</span><span style="color: #0000BB;">$form</span><span style="color: #007700;">, </span><span style="color: #0000BB;">$form_state</span><span style="color: #007700;">) = </span><span style="color: #0000BB;">ajax_get_form</span><span style="color: #007700;">();<br />&nbsp; </span><span style="color: #0000BB;">drupal_process_form</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#form_id'</span><span style="color: #007700;">], </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">, </span><span style="color: #0000BB;">$form_state</span><span style="color: #007700;">);<br />&nbsp; </span><span style="color: #0000BB;">$commands </span><span style="color: #007700;">= array();<br />&nbsp; if (!</span><span style="color: #0000BB;">form_get_errors</span><span style="color: #007700;">()) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #FF8000;">// No form error, Lets print a login successful message<br />&nbsp;&nbsp;&nbsp; // And do a page reload<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$commands</span><span style="color: #007700;">[] = </span><span style="color: #0000BB;">ajax_command_html</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'#ajaxlogin-error'</span><span style="color: #007700;">, </span><span style="color: #0000BB;">t</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'Login successful. You are now being redirected.'</span><span style="color: #007700;">));<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$settings_data </span><span style="color: #007700;">= array(</span><span style="color: #DD0000;">'ajaxlogin_reload' </span><span style="color: #007700;">=&gt; </span><span style="color: #0000BB;">TRUE</span><span style="color: #007700;">);<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">array_unshift</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$commands</span><span style="color: #007700;">, </span><span style="color: #0000BB;">ajax_command_settings</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$settings_data</span><span style="color: #007700;">, </span><span style="color: #0000BB;">FALSE</span><span style="color: #007700;">));<br />&nbsp; }<br />&nbsp; else {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #FF8000;">// throw out errors<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$commands</span><span style="color: #007700;">[] = </span><span style="color: #0000BB;">ajax_command_html</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'#ajaxlogin-error'</span><span style="color: #007700;">, </span><span style="color: #0000BB;">theme</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'status_messages'</span><span style="color: #007700;">));<br />&nbsp; }<br />&nbsp; return </span><span style="color: #0000BB;">drupal_json_encode</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$commands</span><span style="color: #007700;">);<br />}<br /><br /></span><span style="color: #FF8000;">/**<br /> * Request password ajax call<br /> */<br /></span><span style="color: #007700;">function </span><span style="color: #0000BB;">ajaxlogin_request_password_ajax_callback</span><span style="color: #007700;">() {<br />&nbsp; </span><span style="color: #0000BB;">module_load_include</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'pages.inc'</span><span style="color: #007700;">, </span><span style="color: #DD0000;">'user'</span><span style="color: #007700;">);<br /><br />&nbsp; list(</span><span style="color: #0000BB;">$form</span><span style="color: #007700;">, </span><span style="color: #0000BB;">$form_state</span><span style="color: #007700;">) = </span><span style="color: #0000BB;">ajax_get_form</span><span style="color: #007700;">();<br />&nbsp; </span><span style="color: #0000BB;">drupal_process_form</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$form</span><span style="color: #007700;">[</span><span style="color: #DD0000;">'#form_id'</span><span style="color: #007700;">], </span><span style="color: #0000BB;">$form</span><span style="color: #007700;">, </span><span style="color: #0000BB;">$form_state</span><span style="color: #007700;">);<br />&nbsp; </span><span style="color: #0000BB;">$commands </span><span style="color: #007700;">= array();<br />&nbsp; if (!</span><span style="color: #0000BB;">form_get_errors</span><span style="color: #007700;">()) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #FF8000;">// Status containing message "Further instructions have been send to your..."<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$commands</span><span style="color: #007700;">[] = </span><span style="color: #0000BB;">ajax_command_html</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'#ajaxlogin-user-pass'</span><span style="color: #007700;">, </span><span style="color: #0000BB;">theme</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'status_messages'</span><span style="color: #007700;">));<br />&nbsp; }<br />&nbsp; else {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">$commands</span><span style="color: #007700;">[] = </span><span style="color: #0000BB;">ajax_command_html</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'#ajaxlogin-error'</span><span style="color: #007700;">, </span><span style="color: #0000BB;">theme</span><span style="color: #007700;">(</span><span style="color: #DD0000;">'status_messages'</span><span style="color: #007700;">));<br />&nbsp; }<br />&nbsp; return </span><span style="color: #0000BB;">drupal_json_encode</span><span style="color: #007700;">(</span><span style="color: #0000BB;">$commands</span><span style="color: #007700;">);<br />}<br /></span><span style="color: #0000BB;">?&gt;</span></span></code></div></p>
<p>Finally little js trick if the login is successful we reloading the page again to load the authenticated user UI.<br />
Create a file /js/ajaxlogin.js and add the code below.<br />
<div class="codeblock"><code><span style="color: #000000;"><span style="color: #0000BB;">&lt;?php<br /></span><span style="color: #007700;">(function($) {<br />&nbsp; <br />&nbsp; </span><span style="color: #0000BB;">Drupal</span><span style="color: #007700;">.</span><span style="color: #0000BB;">behaviors</span><span style="color: #007700;">.</span><span style="color: #0000BB;">ajaxlogin </span><span style="color: #007700;">= { <br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">attach</span><span style="color: #007700;">: function(</span><span style="color: #0000BB;">context</span><span style="color: #007700;">, </span><span style="color: #0000BB;">settings</span><span style="color: #007700;">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #FF8000;">// Redirect if ajaxlogin_reload property is set<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #007700;">if (</span><span style="color: #0000BB;">settings</span><span style="color: #007700;">.</span><span style="color: #0000BB;">ajaxlogin_reload</span><span style="color: #007700;">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB;">window</span><span style="color: #007700;">.</span><span style="color: #0000BB;">location</span><span style="color: #007700;">.</span><span style="color: #0000BB;">reload</span><span style="color: #007700;">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; },&nbsp; <br />&nbsp; };&nbsp; <br />&nbsp; <br />}) (</span><span style="color: #0000BB;">jQuery</span><span style="color: #007700;">);<br /></span><span style="color: #0000BB;">?&gt;</span></span></code></div></p>
<p>I have attached the module code below.</p>
<table class="sticky-enabled" id="attachments">
 <thead><tr><th>Attachment</th><th>Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td><a href="http://linuxers.org/sites/default/files/ajaxlogin.tgz">ajaxlogin.tgz</a></td><td>2.35 KB</td> </tr>
</tbody>
</table>
<!-- google_ad_section_end --><img height="1" src="http://feeds.feedburner.com/~r/Linuxers/~4/fBUBJCaPIEE" width="1" />
</DIV>

</DIV>



</DIV>
<DIV id="page_links">
<A HREF=/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_1.html><</A>
<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_1.html">1</A>

<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_2.html">2</A>

<A HREF="/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_3.html">3</A>


<A HREF=/home/eco/bin/apps/static-rss/html/feeds/2e32e44653458a4d070778c72b1911eb1fcea6e3a52e2077166abe6d/page_2.html>></A>
</DIV>
</DIV>
</DIV>
</BODY>
</HTML>
